/* Stationary variant container (bottom-right corner) */
.robot-container.robot-fixed {
  position: absolute;
  bottom: 14px;
  right: 20px;
  width: 180px;
  height: 180px;
  pointer-events: none;
  z-index: 500;
  overflow: visible;
}

.robot {
  position: absolute;
  bottom: 0;
  right: 0;
  width: 72px;
  height: 120px;
  transform-origin: center bottom;
}

/* States for stationary robot */
.robot.idle { animation: idle-bob 3s ease-in-out infinite; }
.robot.thinking { animation: think-pulse 2.4s ease-in-out infinite; }
.robot.talking { animation: talking-bounce 0.5s infinite; }

/* Head */
.robot-head {
  position: relative;
  width: 48px;
  height: 48px;
  background: radial-gradient(circle at 35% 30%, #fff7d4 0%, #ffd159 55%, #d3950d 95%);
  border-radius: 16px 16px 22px 22px;
  margin: 0 auto 6px;
  border: 2px solid rgba(255,255,255,0.18);
  box-shadow:
    0 4px 10px -2px rgba(0,0,0,0.55),
    0 0 0 3px rgba(255,192,0,0.22),
    inset 3px 3px 6px rgba(255,255,255,0.35),
    inset -4px -5px 8px rgba(0,0,0,0.55);
}
/* Blush cheeks */
.robot-head::before, .robot-head::after {
  content: '';
  position: absolute;
  bottom: 14px;
  width: 10px; height: 10px;
  background: radial-gradient(circle at 40% 40%, rgba(255,170,150,0.9), rgba(255,120,120,0.2) 65%, rgba(255,120,120,0));
  filter: blur(0.3px);
  opacity: 0.82;
  animation: blush-pulse 5s ease-in-out infinite;
}
.robot-head::before { left: 4px; }
.robot-head::after { right: 4px; }

/* Antenna */
.antenna { position: absolute; top: -16px; left: 50%; transform: translateX(-50%); height: 16px; width: 2px; }
.antenna-stem { width: 2px; height: 14px; background: linear-gradient(#777,#333); margin: 0 auto; border-radius: 2px; }
.antenna-tip { width: 8px; height: 8px; background: radial-gradient(circle, #fff4cc, #FFC000 70%, #b38600); border-radius: 50%; margin: -3px auto 0; box-shadow: 0 0 6px #FFC000; }

/* Eyes */
.robot-eye {
  position: absolute;
  width: 11px;
  height: 11px;
  background: radial-gradient(circle at 35% 35%, #fff, #f2f2f2 55%, #d0d0d0 90%);
  border-radius: 50%;
  top: 14px;
  box-shadow: 0 0 6px #ffe2d9, 0 0 12px rgba(255,87,51,0.35), inset 0 0 2px rgba(0,0,0,0.35);
  transition: all 0.25s ease;
  border: 1px solid rgba(0,0,0,0.38);
  overflow: hidden;
}
.robot-eye.blinking { height: 2px; transform: translateY(4px); border-radius: 4px; box-shadow: 0 0 2px rgba(0,0,0,0.6); }
.robot-eye::after {
  content: '';
  position: absolute;
  top: 2px; left: 3px;
  width: 5px; height: 5px;
  background: radial-gradient(circle,#ffffff,#ffffff44 60%, rgba(255,255,255,0));
  border-radius: 50%;
  opacity: 0.95;
}
.robot-eye .pupil {
  position: absolute;
  top: 50%; left: 50%;
  width: 5px; height: 5px;
  background: radial-gradient(circle at 35% 35%, #222, #000 70%);
  border-radius: 50%;
  transform: translate(calc(-50% + var(--pupil-x, 0)), calc(-50% + var(--pupil-y, 0)));
  transition: transform 0.15s ease;
  box-shadow: 0 0 2px rgba(0,0,0,0.6);
}
.robot-head .head-glow {
  position: absolute;
  inset: -6px;
  background: radial-gradient(circle at 40% 30%, rgba(255,220,120,0.6), rgba(255,160,0,0.15) 55%, rgba(255,140,0,0) 75%);
  filter: blur(8px);
  z-index: -1;
  pointer-events: none;
  animation: head-glow-pulse 4.5s ease-in-out infinite;
}
.robot.thinking .robot-head { animation: head-tilt 3s ease-in-out infinite; }
.left-eye { left: 9px; }
.right-eye { right: 9px; }
.robot-eye.thinking { background: radial-gradient(circle at 40% 35%, #fff7c2, #ffd54f 60%, #dc9f00); box-shadow: 0 0 6px #ffd54f, 0 0 16px #FFC000; animation: thinking-blink 1.2s infinite, eye-sparkle 3.2s ease-in-out infinite; }

/* Robot Mouth (compact LED panel) */
.robot-mouth { position: absolute; bottom: 8px; left: 50%; transform: translateX(-50%); font-family: "Courier New", Consolas, monospace; font-size: 9px; line-height: 1; padding: 0; margin: 0; background: none; border: none; box-shadow: none; width: auto; height: auto; color: #ffb680; letter-spacing: 1px; }
/* Enhanced variant wrapper */
/* ASCII mouth variant minimal */
.robot-mouth.ascii-mouth { text-shadow: none; filter: none; }
.robot-mouth.ascii-mouth.talking { animation: ascii-mouth-wobble 0.5s ease-in-out infinite; }
@keyframes ascii-mouth-wobble { 0%,100% { transform: translateX(-50%) scale(1); } 50% { transform: translateX(-50%) scale(1.12); } }
/* LED matrix layer */
.robot-mouth::before {
  content: '';
  position: absolute;
  inset: 1px;
  background:
    radial-gradient(circle at 3px 3px, #ff935d 22%, rgba(255,147,93,0.08) 40%, rgba(0,0,0,0) 70%),
    radial-gradient(circle at 9px 3px, #ff935d 22%, rgba(255,147,93,0.08) 40%, rgba(0,0,0,0) 70%),
    radial-gradient(circle at 15px 3px, #ff935d 22%, rgba(255,147,93,0.08) 40%, rgba(0,0,0,0) 70%);
  background-repeat: no-repeat;
  filter: brightness(0.75) saturate(1.1);
  mix-blend-mode: screen;
  animation: mouth-breathe 3.6s ease-in-out infinite;
}
/* Scan highlight / overlay */
.robot-mouth::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(100deg, rgba(255,160,100,0) 0%, rgba(255,160,100,0.35) 45%, rgba(255,160,100,0) 90%);
  transform: translateX(-120%);
  animation: none;
  pointer-events: none;
}
.robot-mouth.idle { width: 18px; height: 9px; }
.robot-mouth.idle::before { filter: brightness(0.6) saturate(0.9); }
.robot-mouth.thinking { width: 16px; height: 8px; }
.robot-mouth.thinking::after { animation: mouth-scan-slow 2.2s linear infinite; }
.robot-mouth.thinking::before { filter: brightness(0.85) saturate(1.15); }
.robot-mouth.talking { width: 20px; height: 10px; box-shadow: 0 0 8px rgba(255,110,60,0.4), inset 0 0 6px rgba(0,0,0,0.9); }
.robot-mouth.talking::before { animation: mouth-flicker 0.8s steps(5,end) infinite, mouth-breathe 3.6s ease-in-out infinite; filter: brightness(1.25) saturate(1.5); }
.robot-mouth.talking::after { animation: mouth-scan-fast 1.1s linear infinite; background: linear-gradient(100deg, rgba(255,170,110,0) 0%, rgba(255,170,110,0.5) 50%, rgba(255,170,110,0) 95%); }

/* Neck */
.robot-neck { width: 18px; height: 8px; margin: 0 auto 2px; background: linear-gradient(145deg,#2e2e2e,#1c1c1c); border-radius: 3px; box-shadow: inset 1px 1px 2px rgba(255,255,255,0.08), inset -2px -2px 4px rgba(0,0,0,0.6); }

/* Torso */
.robot-body {
  position: relative;
  width: 38px;
  height: 48px;
  background: linear-gradient(160deg,#444,#2c2c2c 55%,#1c1c1c);
  border-radius: 10px 10px 12px 12px;
  margin: 0 auto 2px;
  border: 1px solid rgba(255,255,255,0.06);
  box-shadow: 0 4px 8px -2px rgba(0,0,0,0.6), inset 2px 2px 4px rgba(255,255,255,0.08), inset -3px -3px 6px rgba(0,0,0,0.7);
}
.robot-panel { position: absolute; top: 6px; left: 6px; right: 6px; height: 16px; border: 1px solid rgba(255,255,255,0.08); border-radius: 6px; }
.panel-line { position: absolute; left: 6px; right: 6px; height: 2px; top: 6px; background: rgba(255,255,255,0.08); }
.panel-line.short { width: 18px; left: auto; right: 6px; top: 10px; }
.robot-chest-light { position: absolute; bottom: 6px; left: 50%; transform: translateX(-50%); width: 10px; height: 10px; background: radial-gradient(circle,#ffe7e1,#FF5733 60%, #b43718 90%); border-radius: 50%; animation: chest-pulse 2.4s infinite; box-shadow: 0 0 4px #FF5733, 0 0 10px #ff7a54; }

/* Shoulders & Arms */
.robot-shoulder { position: absolute; top: 52px; width: 10px; height: 10px; background: linear-gradient(#3a3a3a,#1a1a1a); border-radius: 50%; box-shadow: inset 1px 1px 2px rgba(255,255,255,0.1), inset -2px -2px 4px rgba(0,0,0,0.7); }
.left-shoulder { left: 4px; }
.right-shoulder { right: 4px; }
.upper-arm { position: absolute; top: 6px; left: 50%; transform: translateX(-50%); width: 9px; height: 22px; background: linear-gradient(145deg,#555,#2d2d2d); border-radius: 5px; transform-origin: top center; }
.elbow { position: absolute; bottom: -4px; left: 50%; transform: translateX(-50%); width: 10px; height: 10px; background: linear-gradient(#3a3a3a,#1a1a1a); border-radius: 50%; }
.forearm { position: absolute; bottom: -22px; left: 50%; transform: translateX(-50%); width: 8px; height: 22px; background: linear-gradient(145deg,#555,#2d2d2d); border-radius: 5px; transform-origin: top center; }
.claw { position: absolute; bottom: -8px; left: 50%; transform: translateX(-50%); width: 14px; height: 8px; border-radius: 6px; background: linear-gradient(145deg,#2e2e2e,#121212); display: flex; justify-content: space-between; padding: 0 2px; }
.pincer { display: block; width: 4px; height: 8px; background: linear-gradient(#888,#333); border-radius: 2px; }

/* Arm animations (thinking posture) */
.robot.idle .upper-arm { animation: idle-arm 4s ease-in-out infinite; }
.robot.thinking .upper-arm { animation: thinking-arm-hold 2.2s ease-in-out infinite; }
.robot.thinking .forearm { animation: forearm-think 2.2s ease-in-out infinite; }
.robot.talking .upper-arm { animation: talking-arm 0.5s infinite; }

/* Legs removed for stationary variant */

/* No leg animations */

/* Removed leg references */

/* Speech bubble */
.speech-bubble {
  position: absolute;
  bottom: 150px;
  color: #fff;
  padding: 14px 20px;
  border-radius: 18px;
  font-size: 0.95rem;
  font-weight: 500;
  line-height: 1.4;
  max-width: 340px;
  min-width: 220px;
  animation: bubble-appear 0.35s ease-out;
  transform: translateX(-50%);
  z-index: 999; /* elevated to ensure visibility */
  backdrop-filter: blur(12px) saturate(140%);
  -webkit-backdrop-filter: blur(12px) saturate(140%);
  border: 1px solid rgba(255,255,255,0.25);
  background: linear-gradient(135deg, rgba(80,80,80,0.35), rgba(120,120,120,0.18));
  box-shadow: 0 6px 30px -8px rgba(0,0,0,0.6), 0 0 0 2px rgba(255,192,0,0.15);
}
.speech-bubble.typing { min-width: 100px; max-width: 120px; padding: 10px 12px; }
.bubble-content { font-weight: 500; letter-spacing: 0.4px; text-align: left; }
.bubble-arrow { position: absolute; bottom: -12px; left: 50%; transform: translateX(-50%); width: 22px; height: 14px; overflow: hidden; }
.bubble-arrow::after { content: ''; position: absolute; top: -8px; left: 50%; transform: translateX(-50%) rotate(45deg); width: 18px; height: 18px; background: linear-gradient(135deg, rgba(120,120,120,0.45), rgba(160,160,160,0.25)); border-left: 1px solid rgba(255,255,255,0.25); border-top: 1px solid rgba(255,255,255,0.25); box-shadow: 0 0 0 2px rgba(255,192,0,0.18); }

/* Typing dots */
.typing-dots { display: flex; gap: 4px; align-items: center; justify-content: center; }
.typing-dots span { display: block; width: 6px; height: 6px; border-radius: 50%; background: #fff; opacity: 0.3; animation: dot 1.2s infinite; }
.typing-dots span:nth-child(2) { animation-delay: 0.15s; }
.typing-dots span:nth-child(3) { animation-delay: 0.3s; }

/* Ground shadow */
.robot-shadow { position: absolute; bottom: -4px; left: 50%; transform: translateX(-50%); width: 80px; height: 14px; background: radial-gradient(ellipse at center, rgba(0,0,0,0.55), rgba(0,0,0,0) 70%); filter: blur(4px); opacity: 0.55; pointer-events: none; z-index: -1; }

/* Animations */
@keyframes blink { 0%, 90%, 100% { opacity: 1; } 95% { opacity: 0.3; } }
@keyframes thinking-blink { 0%, 50% { opacity: 1; } 25%, 75% { opacity: 0.5; } }
@keyframes talking { 0%,100%{ width:12px; height:6px; border-radius:0 0 12px 12px;} 50%{ width:16px; height:10px; border-radius:8px; } } /* legacy (kept if referenced elsewhere) */
@keyframes mouth-breathe { 0%,100% { filter: brightness(0.7);} 50% { filter: brightness(1);} }
@keyframes mouth-flicker { 0%,100% { filter: brightness(1.1);} 40% { filter: brightness(1.4);} 60% { filter: brightness(0.95);} 80% { filter: brightness(1.3);} }
@keyframes mouth-scan-slow { 0% { transform: translateX(-120%);} 100% { transform: translateX(120%);} }
@keyframes mouth-scan-fast { 0% { transform: translateX(-120%);} 100% { transform: translateX(120%);} }
@keyframes chest-pulse { 0%,100%{ opacity:1; transform: translateX(-50%) scale(1);} 50%{ opacity:0.7; transform: translateX(-50%) scale(1.2);} }
@keyframes blush-pulse { 0%,100% { transform: scale(1); opacity: 0.78;} 50% { transform: scale(1.15); opacity: 0.9;} }
@keyframes eye-sparkle { 0%,100% { filter: brightness(1); } 50% { filter: brightness(1.25); } }
@keyframes head-glow-pulse { 0%,100% { opacity: 0.65; transform: scale(1);} 50% { opacity: 0.9; transform: scale(1.04);} }
@keyframes head-tilt { 0%,100% { transform: rotate(0deg);} 50% { transform: rotate(-4deg);} }

/* Arms */
@keyframes idle-arm { 0%,100% { transform: rotate(4deg);} 50% { transform: rotate(-4deg);} }
@keyframes thinking-arm-hold { 0%,100% { transform: rotate(-6deg);} 50% { transform: rotate(-12deg);} }
@keyframes forearm-think { 0%,100% { transform: translateX(-50%) rotate(20deg);} 50% { transform: translateX(-50%) rotate(35deg);} }
@keyframes talking-arm { 0%,100% { transform: rotate(0deg); } 25% { transform: rotate(-10deg); } 75% { transform: rotate(10deg); } }

/* Legs */
/* Leg keyframes removed */

/* Bubbles & body idle */
@keyframes bubble-appear { 0%{ opacity:0; transform: translateX(-50%) scale(0.85) translateY(10px);} 100%{ opacity:1; transform: translateX(-50%) scale(1) translateY(0);} }
@keyframes idle-bob { 0%,100% { transform: translateY(0px);} 50% { transform: translateY(-2px);} }
@keyframes think-pulse { 0%,100% { transform: translateY(0px) scale(1);} 50% { transform: translateY(-3px) scale(1.02);} }
@keyframes talking-bounce { 0%,100% { transform: translateY(0px);} 50% { transform: translateY(-2px);} }
@keyframes dot { 0%,80%,100% { opacity: 0.25; transform: translateY(0); } 40% { opacity: 1; transform: translateY(-2px); } }

/* Responsive */
@media (max-width: 768px) {
  .robot-container { height: 100px; bottom: 10px; }
  .robot { width: 56px; height: 96px; }
  .robot-head { width: 36px; height: 36px; }
  .robot-body { width: 30px; height: 38px; }
  .speech-bubble { bottom: 120px; padding: 12px 16px; font-size: 0.82rem; max-width: 280px; min-width: 180px; }
}
@media (max-width: 480px) { .speech-bubble { max-width: 210px; min-width: 150px; font-size: 0.74rem; padding: 10px 14px; } }

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {
  .robot, .speech-bubble, .robot * { animation: none !important; transition: none !important; }
}